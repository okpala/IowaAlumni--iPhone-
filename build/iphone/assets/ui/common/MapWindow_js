function MapWindow(e,t){t.trackScreen(e);for(var i=new Feed,o=Ti.UI.createView({backgroundColor:"#ffffff",navBarHidden:!0}),n=new GetFeed(i.iowaCityFeed()),a=[],r=n[0].latitude,l=n[0].longitude,d=0;d<=n.length-1;d++)a.push(Map.createAnnotation({latitude:n[d].latitude,longitude:n[d].longitude,title:n[d].company,subtitle:n[d].street,pincolor:Map.ANNOTATION_RED,animate:!0}));var c=Map.createView({mapType:Map.NORMAL_TYPE,region:{latitude:a[0].latitude,longitude:a[0].longitude,latitudeDelta:.01,longitudeDelta:.01},animate:!0,regionFit:!0,userLocation:!0,height:200,annotations:a,top:0}),s=Ti.UI.createButton({title:"Get Route",width:80,height:25,backgroundColor:"#ffffff",bottom:20,left:20,font:{fontFamily:"HelveticaNeue-Light",fontSize:12,fontWeight:"bold"}});c.add(s),s.addEventListener("click",function(){Ti.Network.online?(Ti.Geolocation.purpose="Receive User Location",Titanium.Geolocation.getCurrentPosition(function(e){if(!e.success||e.error)return void alert("Could not find the device location");var t=parseFloat(e.coords.longitude,10).toFixed(5),i=parseFloat(e.coords.latitude,10).toFixed(5),o="http://maps.google.com/maps?saddr="+i+","+t+"&daddr="+r+","+l;new WebView(o)})):alert("Internet connection is required to use localization features")});var u=Ti.UI.createView({backgroundColor:"#e2e2e2",height:70,top:200}),g=Ti.UI.createLabel({text:"UI Alumni Association members have".concat("\nan array of available to them. Use your member benefit card at any of these locations."),textAlign:"left",left:10,width:300,top:10,font:{fontFamily:"HelveticaNeue-Light",fontSize:14,fontWeight:"bold"}});u.add(g);var m=Ti.UI.createLabel({text:"benefits",textAlign:"left",left:236.5,top:10,color:"blue",font:{fontFamily:"HelveticaNeue-Light",fontSize:14,fontWeight:"bold"}});m.addEventListener("click",function(){new WebView("http://iowalum.com/membership/benefits.cfm"),t.trackEvent({category:"Benefits",action:"click",label:"Members Benefits' Website",value:1})}),u.add(m);for(var w=Ti.UI.createTableView({height:"auto",top:270}),h=[],d=0;d<=n.length-1;d++){if(d%2==0)var f=Ti.UI.createTableViewRow({company:n[d].company,latitude:n[d].latitude,longitude:n[d].longitude,height:"auto",bottom:10});else var f=Ti.UI.createTableViewRow({company:n[d].company,latitude:n[d].latitude,longitude:n[d].longitude,height:"auto",backgroundColor:"#cccccc",bottom:10});var p=Ti.UI.createLabel({text:n[d].company,textAlign:"left",height:20,top:10,left:10,font:{fontFamily:"Helvetica-Bold",fontSize:16,fontWeight:"normal"}}),b=Ti.UI.createLabel({text:n[d].discount,textAlign:"left",left:10,top:31,font:{fontFamily:"HelveticaNeue-Light",fontSize:12,fontWeight:"bold"}});f.add(p),f.add(b),h.push(f)}w.setData(h),o.add(c),o.add(u),o.add(w),w.addEventListener("click",function(e){c=Map.createView({mapType:Map.NORMAL_TYPE,region:{latitude:e.row.latitude,longitude:e.row.longitude,latitudeDelta:.01,longitudeDelta:.01},animate:!0,regionFit:!0,userLocation:!0,height:200,annotations:a,top:0}),r=e.row.latitude,l=e.row.longitude,o.add(c),c.selectAnnotation(a[e.index]),t.trackEvent({category:"Benefits",action:"click",label:a[e.index].title,value:1}),c.add(s)});var T=new NavigateWindow("Iowa City Benefits",o);return T}var GetFeed=require("ui/common/GetFeed"),ApplicationWindow=require("ui/common/ApplicationWindow"),NavigateWindow=require("ui/common/NavigateWindow"),WebView=require("ui/common/WebView"),Feed=require("ui/common/Feed"),Map=require("ti.map");module.exports=MapWindow;