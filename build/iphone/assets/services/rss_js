function RSS(e){this.feed=e}var WebView=require("ui/common/WebView"),Feed=require("ui/common/Feed"),Feed=new Feed,osname=Ti.Platform.osname,RSS_URL="mobileweb"===osname?"/feed.xml":Feed.iowaInsiderFeed(),MONTH_MAP={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12},getRssText=function(e,n){return"mobileweb"===osname?e.getElementsByTagName(n).item(0).textContent:e.getElementsByTagName(n).item(0).text},parseDate=function(e){var n=e.split(" "),i=n[4].split(":");return MONTH_MAP[n[2].toUpperCase()]+"/"+n[1]+" "+i[0]+":"+i[1]};RSS.prototype.loadRssFeed=function(e,n){var i=Ti.Network.createHTTPClient();n=n||0,i.open("GET",this.feed),i.onload=function(){var i=this.responseXML;if(null===i||null===i.documentElement)return 3>n?(n++,exports.loadRssFeed(e,n),void 0):(alert("Error reading RSS feed. Make sure you have a network connection and try refreshing."),e.error&&e.error(),void 0);for(var t=i.documentElement.getElementsByTagName("item"),a=[],r=0;t.length>r;r++){var o,d=t.item(r);try{var o=d.getElementsByTagNameNS("http://mashable.com/","thumbnail").item(0).getElementsByTagName("img").item(0).getAttribute("src")}catch(s){o=""}try{a.push({snl:getRssText(d,"snl"),place:getRssText(d,"place"),title:getRssText(d,"title"),link:getRssText(d,"link"),description:getRssText(d,"description"),pubDate:getRssText(d,"pubDate"),hlink:getRssText(d,"hlink"),category:getRssText(d,"category"),image:o})}catch(m){a.push({title:getRssText(d,"title"),link:getRssText(d,"link"),description:getRssText(d,"description"),pubDate:getRssText(d,"pubDate"),image:o})}}e.success&&e.success(a)},i.onerror=function(){e.error&&e.error()},e.start&&e.start(),i.send()},module.exports=RSS;