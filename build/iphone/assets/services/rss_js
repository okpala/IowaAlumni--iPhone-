function RSS(e){this.feed=e}var WebView=require("ui/common/WebView"),Feed=require("ui/common/Feed"),Feed=new Feed,osname=Ti.Platform.osname,RSS_URL="mobileweb"===osname?"/feed.xml":Feed.iowaInsiderFeed(),MONTH_MAP={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12},getRssText=function(e,n){return"mobileweb"===osname?e.getElementsByTagName(n).item(0).textContent:e.getElementsByTagName(n).item(0).text},parseDate=function(e){var n=e.split(" "),i=n[4].split(":");return MONTH_MAP[n[2].toUpperCase()]+"/"+n[1]+" "+i[0]+":"+i[1]};RSS.prototype.loadRssFeed=function(e,n){var i=Titanium.Network.createHTTPClient();n=n||0,i.open("GET",this.feed),i.onload=function(){var i=this.responseXML;if(null===i||null===i.documentElement)return 3>n?(n++,void exports.loadRssFeed(e,n)):(alert("Error reading RSS feed. Make sure you have a network connection and try refreshing."),void(e.error&&e.error()));for(var t=i.documentElement.getElementsByTagName("item"),o=[],a=0;a<t.length;a++){var s,r=t.item(a);try{var s=r.getElementsByTagNameNS("http://mashable.com/","thumbnail").item(0).getElementsByTagName("img").item(0).getAttribute("src")}catch(w){s=""}try{o.push({snl:getRssText(r,"snl"),place:getRssText(r,"place"),title:getRssText(r,"title"),link:getRssText(r,"link"),description:getRssText(r,"description"),pubDate:getRssText(r,"pubDate"),hlink:getRssText(r,"hlink"),category:getRssText(r,"category"),postDate:getRssText(r,"date"),image:s})}catch(l){o.push({title:getRssText(r,"title"),link:getRssText(r,"link"),description:getRssText(r,"description"),pubDate:getRssText(r,"pubDate"),image:s})}}e.success&&e.success(o)},i.onerror=function(){e.error&&e.error()},e.start&&e.start(),i.send()},module.exports=RSS;